@model SalesViewModel
@inject ISelectProductType services
@{
    ViewData["Title"] = "Index";
}



@section title {
    <div class="row">
        <div class="col-7"><h3>Cashier's Console</h3></div>
        <div class="col-2"><label for="cashier">Cashier Name:</label></div>
        <div class="col-3">
            @* Display Cashier's name here *@
            @User?.Identity?.Name
        </div>
    </div>
}


  
    
    <br />
<div class="row">
    <div class="col-4">
        <div class="text-danger" asp-validation-summary="All"></div>
        @* Category selection *@
        <label asp-for="SelectedCategoryId" class="control-label"></label>

        <select id="categoryDropdown" asp-for="SelectedCategoryId" class="form-control" asp-items="@await services.GetProductsCategory()">
            <option>- Please Select -</option>
    
        </select>
        <br />
        <div id="cont-category-product">
            @* Product List *@
        </div>
        <br />
        <div id="productDetailPartial">
            @* Product Details *@
        </div>
        </<div>
</div>
        </div>
        </div>
        @section Scripts {
  
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#categoryDropdown").change(function () {
                var SelectedCategoryId = $(this).val();
                $.ajax({
                    url: '@Url.Action("GetProductsByCategoryIdAjax", "Sales")', // Update the controller and action names accordingly
                    type: 'GET',
                    data: { SelectedCategoryId: SelectedCategoryId },
                    success: function (response) {
                        $("#cont-category-product").html(response);
                    },
                    error: function () {
                        alert('Error occurred while fetching products.');
                    }
                });
            });
        });
    </script>
    }